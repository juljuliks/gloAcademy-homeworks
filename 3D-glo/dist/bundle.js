(()=>{"use strict";var e,t,n,o,r,c,a,l,u,i,s,m,d,v,f,p,g,h;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){var t=String(e);return 1===t.length?"0"+t:e}var c=setInterval(a);function a(){var e,a,l,u=(e=(new Date("09 may 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(e%60),l=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60)%24,minutes:l,seconds:a});if(t.textContent=r(u.hours),n.textContent=r(u.minutes),o.textContent=r(u.seconds),Math.floor(u.timeRemaining)<=0){clearInterval(c),t.textContent="00",n.textContent="00",o.textContent="00";var i=document.getElementById("timer").getElementsByTagName("span");(i=Array.from(i)).forEach((function(e){e.style.color="red"}))}}a(),setInterval(a,1e3)})(),h=document.querySelector("menu"),window.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")||t.matches("a")?h.classList.toggle("active-menu"):t.closest("menu")&&!t.matches(".close-btn")||h.classList.remove("active-menu")})),d=document.querySelector(".popup"),v=document.querySelectorAll(".popup-btn"),f=document.querySelector(".popup-content"),p=0,g=function e(){m=requestAnimationFrame(e),(p+=3)<=43?f.style.left=p+"%":cancelAnimationFrame(m)},v.forEach((function(e){e.addEventListener("click",(function(){d.style.display="block",screen.width>768?(m=requestAnimationFrame(g),p=0):(f.style.left="28%",cancelAnimationFrame(m))}))})),d.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?d.style.display="none":(t=t.closest(".popup-content"))||(d.style.display="none")})),function(){var e=document.querySelector("menu").querySelectorAll("ul>li>a"),t=document.querySelector("#service-block"),n=document.querySelector("#portfolio"),o=document.querySelector("#calc"),r=document.querySelector("#command"),c=document.querySelector("#connect");function a(e){window.scroll({left:0,top:e.getBoundingClientRect().top,behavior:"smooth"})}document.querySelector("#scrollImg").addEventListener("click",(function(e){e.preventDefault(),a(t)})),e.forEach((function(e){e.addEventListener("click",(function(l){l.preventDefault();var u=e.getAttribute("href");"#service-block"===u?a(t):"#portfolio"===u?a(n):"#calc"===u?a(o):"#command"===u?a(r):"#connect"===u&&a(c)}))}))}(),l=document.querySelector(".service-header"),u=l.querySelectorAll(".service-header-tab"),i=document.querySelectorAll(".service-tab"),s=function(e){for(var t=0;t<i.length;t++)e===t?(u[t].classList.add("active"),i[t].classList.remove("d-none")):(u[t].classList.remove("active"),i[t].classList.add("d-none"))},l.addEventListener("click",(function(e){var t=e.target;for(t=t.closest(".service-header-tab");t!==l;)return void(t&&u.forEach((function(e,n){e===t&&s(n)})))})),function(){var e,t,n=document.querySelector(".portfolio-content"),o=document.querySelectorAll(".portfolio-item"),r=document.querySelector(".portfolio-dots"),c=0;!function(){for(var e=0;e<o.length;e++){var n=document.createElement("li");n.className="dot",r.append(n)}t=document.querySelectorAll(".dot")}();var a=function(e,t,n){e[t].classList.remove(n)},l=function(e,t,n){e[t].classList.add(n)},u=function(){a(o,c,"portfolio-item-active"),a(t,c,"dot-active"),++c>=o.length&&(c=0),l(o,c,"portfolio-item-active"),l(t,c,"dot-active")},i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500;e=setInterval(u,t)};n.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(a(o,c,"portfolio-item-active"),a(t,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&t.forEach((function(e,t){e===n&&(c=t)})),c>=o.length?c=0:c<0&&(c=o.length-1),l(o,c,"portfolio-item-active"),l(t,c,"dot-active"))})),n.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),n.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)}(),document.querySelector(".command").querySelectorAll(".command__photo").forEach((function(e){var t;e.addEventListener("mouseenter",(function(e){t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(function(e){e.target.src=t}))})),e=document.querySelectorAll("input.calc-item"),t=document.querySelectorAll("[name=user_name]"),n=document.querySelectorAll("[name=user_message]"),o=document.querySelectorAll("[name=user_email]"),r=document.querySelectorAll("[name=user_phone]"),c=function(e){e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");var t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))},a=function(e,t){e.value.match(t)||(e.value="")},t.forEach((function(e){e.addEventListener("blur",(function(){c(e),e.value=e.value.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "),a(e,/[а-яё]{2,}/gi)}))})),n.forEach((function(e){e.addEventListener("blur",(function(){a(e,/[^а-яё0-9\.\,\:\-\!\? ]/gi),c(e)}))})),o.forEach((function(e){e.addEventListener("blur",(function(){e.value=e.value.replace(/\s/g,""),a(e,/\w+@\w+\.\w{2,3}/g)}))})),r.forEach((function(e){e.addEventListener("blur",(function(){c(e),a(e,/\+?([-()]*\d){7,}/g)}))})),window.addEventListener("input",(function(t){t.target.matches(".calc-item")&&e.forEach((function(e){e.value=e.value.replace(/[^\d]/g,"")})),t.target.matches("[name=user_name]")&&(t.target.value=t.target.value.replace(/[^а-яё\-\ ]/gi,"")),t.target.matches("#form2-message")&&(t.target.value=t.target.value.replace(/[^а-яё0-9\.\,\:\-\!\? ]/gi,"")),t.target.matches("[name=user_email]")&&(t.target.value=t.target.value.replace(/[^a-z\@\_\-\.\!\~\*\']/gi,"")),t.target.matches("[name=user_phone]")&&(t.target.value=t.target.value.replace(/[^\d\(\)\-\+]/g,""),t.target.value.length>10&&(t.target.value=t.target.value.substring(0,11)))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelectorAll("input.calc-item"),n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),l=document.getElementById("total"),u=function(){var t=0,n=1,l=1,u=o.value,i=+r.value;return a.value>1&&(n+=(a.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),u&&i&&(t=Math.floor(e*u*i*n*l)),t},i=function e(){var t,n=u(),o=+l.textContent,r=n/200;o<n?(l.textContent=Math.floor(o+r),t=setTimeout(e,5)):(l.textContent=n,clearTimeout(t))};n.addEventListener("change",(function(e){var n=e.target;(n.matches("select")||n.matches("input"))&&i(),n.matches("select.calc-type")&&""===o.value&&t.forEach((function(e){e.value=""}))}))}(100),function(){var e=document.getElementById("form1"),t=document.getElementById("form2"),n=document.getElementById("form3"),o=document.createElement("div"),r=document.createElement("div");r.classList.add("circle"),o.style.cssText="font-size: 2rem; color: #fff";var c=function(e){e.addEventListener("submit",(function(t){t.preventDefault(),e.appendChild(o),e.appendChild(r);var n=new FormData(e),c={};n.forEach((function(e,t){c[t]=e})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(t){if(200!==t.status)throw new Error("status network not 200");document.querySelector(".circle").remove(),o.textContent="Спасибо, мы скоро с вами свяжемся!",setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),2e3),e.querySelectorAll("input").forEach((function(e){e.value=e.defaultValue}))})).catch((function(e){console.error(e),document.querySelector(".circle").remove(),o.textContent="Что-то пошло не так",setTimeout((function(){o.innerHTML="",document.querySelector(".popup").style.display="none"}),2e3)}))}))};c(e),c(t),c(n)}()})();