(()=>{"use strict";(e=>{let t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),r=document.querySelector("#timer-seconds");!function e(){let c,n=function(){let e=(new Date("07 may 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();function l(e){return e<10&&(e=`0${e}`),e}t.textContent=l(n.hours),o.textContent=l(n.minutes),r.textContent=l(n.seconds),n.timeRemaining>0?c=setInterval(e,1e3):(t.textContent="00",o.textContent="00",r.textContent="00",clearInterval(c))}()})(),(()=>{document.querySelector(".menu");const e=document.querySelector("menu");document.querySelector(".close-btn"),e.querySelectorAll("ul>li"),window.addEventListener("click",(t=>{let o=t.target;o.closest(".menu")||o.closest("menu")?e.classList.toggle("active-menu"):o&&o.closest("menu")||e.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let r,c=0;const n=()=>{r=requestAnimationFrame(n),c+=3,c<=43?o.style.left=c+"%":cancelAnimationFrame(r)};t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block",screen.width>768?(r=requestAnimationFrame(n),c=0):(o.style.left="28%",cancelAnimationFrame(r))}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector("menu").querySelectorAll("ul>li>a"),t=document.querySelector("#service-block"),o=document.querySelector("#portfolio"),r=document.querySelector("#calc"),c=document.querySelector("#command"),n=document.querySelector("#connect");function l(e){window.scroll({left:0,top:e.getBoundingClientRect().top,behavior:"smooth"})}document.querySelector("#scrollImg").addEventListener("click",(e=>{e.preventDefault(),l(t)})),e.forEach((e=>{e.addEventListener("click",(a=>{a.preventDefault();const u=e.getAttribute("href");"#service-block"===u?l(t):"#portfolio"===u?l(o):"#calc"===u?l(r):"#command"===u?l(c):"#connect"===u&&l(n)}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab"),r=e=>{for(let r=0;r<o.length;r++)e===r?(t[r].classList.add("active"),o[r].classList.remove("d-none")):(t[r].classList.remove("active"),o[r].classList.add("d-none"))};e.addEventListener("click",(o=>{let c=o.target;for(c=c.closest(".service-header-tab");c!==e;)return void(c&&t.forEach(((e,t)=>{e===c&&r(t)})))}))})(),(()=>{const e=document.querySelector(".portfolio-content"),t=document.querySelectorAll(".portfolio-item"),o=document.querySelector(".portfolio-dots");let r,c,n=0;(()=>{for(let e=0;e<t.length;e++){let e=document.createElement("li");e.className="dot",o.append(e)}c=document.querySelectorAll(".dot")})();const l=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},u=()=>{l(t,n,"portfolio-item-active"),l(c,n,"dot-active"),n++,n>=t.length&&(n=0),a(t,n,"portfolio-item-active"),a(c,n,"dot-active")},s=(e=1500)=>{r=setInterval(u,e)};e.addEventListener("click",(e=>{e.preventDefault();let o=e.target;o.matches(".portfolio-btn, .dot")&&(l(t,n,"portfolio-item-active"),l(c,n,"dot-active"),o.matches("#arrow-right")?n++:o.matches("#arrow-left")?n--:o.matches(".dot")&&c.forEach(((e,t)=>{e===o&&(n=t)})),n>=t.length?n=0:n<0&&(n=t.length-1),a(t,n,"portfolio-item-active"),a(c,n,"dot-active"))})),e.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),e.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500)})(),document.querySelector(".command").querySelectorAll(".command__photo").forEach((e=>{let t;e.addEventListener("mouseenter",(e=>{t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseleave",(e=>{e.target.src=t}))})),(()=>{const e=document.querySelectorAll("input.calc-item"),t=document.querySelectorAll("[name=user_name]"),o=document.querySelectorAll("[name=user_message]"),r=document.querySelectorAll("[name=user_email]"),c=document.querySelectorAll("[name=user_phone]");let n=new Set;const l=e=>{e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");let t=new RegExp("ReGeX"+e.value+"ReGeX");/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))},a=(e,t,o="Введите корректные данные")=>{e.value.match(t)||(n.add(e.value),e.value="")};t.forEach((e=>{e.addEventListener("blur",(()=>{l(e),e.value=e.value.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "),a(e,/[а-яё]{2,}/gi)}))})),o.forEach((e=>{e.addEventListener("blur",(()=>{a(e,/[^а-яё0-9\.\,\:\-\!\? ]/gi),l(e)}))})),r.forEach((e=>{e.addEventListener("blur",(()=>{a(e,/\w+@\w+\.\w{2,3}/g),l(e)}))})),c.forEach((e=>{e.addEventListener("blur",(()=>{l(e),a(e,/\+?[78]([-()]*\d){10}/g)}))})),window.addEventListener("input",(t=>{var o;t.target.matches(".calc-item")&&e.forEach((e=>{e.value=e.value.replace(/[^\d]/g,"")})),t.target.matches("[name=user_name]")&&(t.target.value=t.target.value.replace(/[^а-яё\-\ ]/gi,"")),t.target.matches("#form2-message")&&((o=t.target).value=o.value.replace(/[^а-яё0-9\.\,\:\-\!\? ]/gi,"")),t.target.matches("[name=user_email]")&&(t.target.value=t.target.value.replace(/[^a-z\@\_\-\.\!\~\*\']/gi,"")),t.target.matches("[name=user_phone]")&&(t.target.value=t.target.value.replace(/[^\d\(\)\-\+]/g,""))}))})(),((e=100)=>{document.querySelectorAll("input.calc-item");const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),n=document.querySelector(".calc-count"),l=document.getElementById("total");let a,u=0;const s=()=>{const e=u,t=+l.textContent,o=e/200;t<e?(l.textContent=Math.floor(t+o),a=setTimeout(s,5)):(l.textContent=e,clearTimeout(a))};t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&((()=>{let t=1,l=1;const a=o.value,s=+r.value;n.value>1&&(t+=(n.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),a&&s&&(u=e*a*s*t*l),u=Math.floor(u)})(),s())})),o.addEventListener("change",(()=>{u=0}))})(100),(()=>{const e=document.getElementById("form1"),t=document.getElementById("form2"),o=document.getElementById("form3"),r=document.createElement("div"),c=document.createElement("div");c.classList.add("circle"),r.style.cssText="font-size: 2rem; color: #fff";const n=e=>{e.addEventListener("submit",(t=>{t.preventDefault(),e.appendChild(r),e.appendChild(c);const o=new FormData(e);let n={};o.forEach(((e,t)=>{n[t]=e})),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>{if(200!==t.status)throw new Error("status network not 200");document.querySelector(".circle").remove(),r.textContent="Спасибо, мы скоро с вами свяжемся!",setTimeout((()=>{r.innerHTML="",document.querySelector(".popup").style.display="none"}),2e3),e.querySelectorAll("input").forEach((e=>{e.value=e.defaultValue}))})).catch((e=>{console.error(e),document.querySelector(".circle").remove(),r.textContent="Что-то пошло не так",setTimeout((()=>{r.innerHTML="",document.querySelector(".popup").style.display="none"}),2e3)}))}))};n(e),n(t),n(o)})()})();